(function(){function c(h,e){this.element=typeof h=="object"?h:document.getElementById(h);this.wrapper=this.element.parentNode;var g="-webkit-transition-property:-webkit-transform;-webkit-transition-timing-function:cubic-bezier(0,0,0.25,1);-webkit-transition-duration:0;-webkit-transform:"+(b?"translate3d(0,0,0)":"translate(0,0)");this.element.setAttribute("style",g);this.options={bounce:b,momentum:b,checkDOMChanges:true,topOnDOMChanges:false,hScrollbar:b,vScrollbar:b,scrollbarClass:null,fadeScrollbar:a,overflow:"auto",};if(typeof e=="object"){for(var f in e){this.options[f]=e[f]}}this.wrapper.style.overflow=this.options.overflow;this.refresh();window.addEventListener("resize",this,false);this.element.addEventListener("touchstart",this,false);if(this.options.checkDOMChanges){this.element.addEventListener("DOMSubtreeModified",this,false)}}c.prototype={x:0,y:0,dist:0,handleEvent:function(f){switch(f.type){case"touchstart":this.touchStart(f);break;case"touchmove":this.touchMove(f);break;case"touchend":this.touchEnd(f);break;case"webkitTransitionEnd":this.transitionEnd(f);break;case"resize":case"orientationchange":this.refresh();break;case"DOMSubtreeModified":this.onDOMModified(f);break}},onDOMModified:function(f){this.refresh();if(this.options.topOnDOMChanges&&(this.x!=0||this.y!=0)){this.scrollTo(0,0,"0")}},refresh:function(){this.scrollWidth=this.wrapper.clientWidth;this.scrollHeight=this.wrapper.clientHeight;this.maxScrollX=this.scrollWidth-this.element.offsetWidth;this.maxScrollY=this.scrollHeight-this.element.offsetHeight;var f=this.x,e=this.y;if(this.scrollX){if(this.maxScrollX>=0){f=0}else{if(this.x<this.maxScrollX){f=this.maxScrollX}}}if(this.scrollY){if(this.maxScrollY>=0){e=0}else{if(this.y<this.maxScrollY){e=this.maxScrollY}}}if(f!=this.x||e!=this.y){this.setTransitionTime("0");this.setPosition(f,e,true)}this.scrollX=this.element.offsetWidth>this.scrollWidth?true:false;this.scrollY=this.element.offsetHeight>this.scrollHeight?true:false;if(this.options.hScrollbar&&this.scrollX){this.scrollBarX=(this.scrollBarX instanceof d)?this.scrollBarX:new d("horizontal",this.wrapper,this.options.scrollbarClass,this.options.fadeScrollbar);this.scrollBarX.init(this.scrollWidth,this.element.offsetWidth)}else{if(this.scrollBarX){this.scrollBarX=this.scrollBarX.remove()}}if(this.options.vScrollbar&&this.scrollY){this.scrollBarY=(this.scrollBarY instanceof d)?this.scrollBarY:new d("vertical",this.wrapper,this.options.scrollbarClass,this.options.fadeScrollbar);this.scrollBarY.init(this.scrollHeight,this.element.offsetHeight)}else{if(this.scrollBarY){this.scrollBarY=this.scrollBarY.remove()}}},setPosition:function(e,g,f){this.x=e;this.y=g;this.element.style.webkitTransform=b?"translate3d("+this.x+"px,"+this.y+"px,0px)":"translate("+this.x+"px,"+this.y+"px)";if(!f){if(this.scrollBarX){this.scrollBarX.setPosition(this.x)}if(this.scrollBarY){this.scrollBarY.setPosition(this.y)}}},setTransitionTime:function(e){e=e||"0";this.element.style.webkitTransitionDuration=e;if(this.scrollBarX){this.scrollBarX.bar.style.webkitTransitionDuration=e+(b&&this.options.fadeScrollbar?",300ms":",0")}if(this.scrollBarY){this.scrollBarY.bar.style.webkitTransitionDuration=e+(b&&this.options.fadeScrollbar?",300ms":",0")}},touchStart:function(g){g.preventDefault();g.stopPropagation();this.moved=false;this.dist=0;this.setTransitionTime("0");if(this.options.momentum){var f=new WebKitCSSMatrix(window.getComputedStyle(this.element).webkitTransform);if(f.e!=this.x||f.f!=this.y){this.element.removeEventListener("webkitTransitionEnd",this,false);this.setPosition(f.e,f.f);this.moved=true}}this.touchStartX=g.touches[0].pageX;this.scrollStartX=this.x;this.touchStartY=g.touches[0].pageY;this.scrollStartY=this.y;this.scrollStartTime=g.timeStamp;this.element.addEventListener("touchmove",this,false);this.element.addEventListener("touchend",this,false)},touchMove:function(i){var g=this.scrollX===true?i.touches[0].pageX-this.touchStartX:0,f=this.scrollY===true?i.touches[0].pageY-this.touchStartY:0,j=this.x+g,h=this.y+f;this.dist+=Math.abs(this.touchStartX-i.touches[0].pageX)+Math.abs(this.touchStartY-i.touches[0].pageY);this.touchStartX=i.touches[0].pageX;this.touchStartY=i.touches[0].pageY;if(j>0||j<this.maxScrollX){j=this.options.bounce?Math.round(this.x+g/3):j>=0?0:this.maxScrollX}if(h>0||h<this.maxScrollY){h=this.options.bounce?Math.round(this.y+f/3):h>=0?0:this.maxScrollY}if(this.dist>5){this.setPosition(j,h);this.moved=true}},touchEnd:function(l){this.element.removeEventListener("touchmove",this,false);this.element.removeEventListener("touchend",this,false);var i=l.timeStamp-this.scrollStartTime;if(!this.moved){this.resetPosition();var m=l.changedTouches[0].target;while(m.nodeType!=1){m=m.parentNode}var n=document.createEvent("MouseEvents");n.initMouseEvent("click",true,true,l.view,1,m.screenX,m.screenY,m.clientX,m.clientY,l.ctrlKey,l.altKey,l.shiftKey,l.metaKey,0,null);m.dispatchEvent(n);return false}if(!this.options.momentum||i>250){this.resetPosition();return false}var g=this.scrollX===true?this.momentum(this.x-this.scrollStartX,i,this.options.bounce?-this.x+this.scrollWidth/3:-this.x,this.options.bounce?this.x+this.element.offsetWidth-this.scrollWidth+this.scrollWidth/3:this.x+this.element.offsetWidth-this.scrollWidth):{dist:0,time:0};var f=this.scrollY===true?this.momentum(this.y-this.scrollStartY,i,this.options.bounce?-this.y+this.scrollHeight/3:-this.y,this.options.bounce?this.y+this.element.offsetHeight-this.scrollHeight+this.scrollHeight/3:this.y+this.element.offsetHeight-this.scrollHeight):{dist:0,time:0};if(!g.dist&&!f.dist){this.resetPosition();return false}var h=Math.max(Math.max(g.time,f.time),1);var k=this.x+g.dist;var j=this.y+f.dist;this.scrollTo(k,j,h+"ms")},transitionEnd:function(){this.element.removeEventListener("webkitTransitionEnd",this,false);this.resetPosition()},resetPosition:function(g){var h=this.x,f=this.y,e=this,g=g||"500ms";if(this.x>=0){h=0}else{if(this.x<this.maxScrollX){h=this.maxScrollX}}if(this.y>=0){f=0}else{if(this.y<this.maxScrollY){f=this.maxScrollY}}if(h!=this.x||f!=this.y){this.scrollTo(h,f,g)}else{if(this.scrollBarX||this.scrollBarY){if(this.scrollBarX){this.scrollBarX.hide()}if(this.scrollBarY){this.scrollBarY.hide()}}}},scrollTo:function(f,e,g){this.element.addEventListener("webkitTransitionEnd",this,false);this.setTransitionTime(g||"450ms");this.setPosition(f,e)},momentum:function(l,f,j,e){var i=2.5,k=1.2,g=Math.abs(l)/f*1000,h=g*g/i/1000,m=0;if(l>0&&h>j){g=g*j/h/i;h=j}if(l<0&&h>e){g=g*e/h/i;h=e}h=h*(l<0?-1:1);m=g/k;return{dist:Math.round(h),time:Math.round(m)}}};var d=function(e,i,g,h){this.dir=e;this.fade=h;this.bar=document.createElement("div");var f="position:absolute;-webkit-transition-timing-function:cubic-bezier(0,0,0.25,1);pointer-events:none;opacity:0;"+(b?"-webkit-transition-duration:0"+(h?",300ms":"")+";-webkit-transition-delay:0,0;-webkit-transition-property:-webkit-transform,opacity;-webkit-transform:translate3d(0,0,0);":"-webkit-transition-duration:0;-webkit-transition-property:webkit-transform;-webkit-transform:translate(0,0);")+(this.dir=="horizontal"?"bottom:2px;left:1px":"top:1px;right:2px");if(g){this.bar.className=g+" "+e}else{f+=";z-index:10;background:rgba(0,0,0,0.5);"+(e=="horizontal"?"-webkit-border-radius:3px 2px;min-width:6px;min-height:5px":"-webkit-border-radius:2px 3px;min-width:5px;min-height:6px")}this.bar.setAttribute("style",f);i.appendChild(this.bar)};d.prototype={init:function(e,f){var g=this.dir=="horizontal"?this.bar.offsetWidth-this.bar.clientWidth:this.bar.offsetHeight-this.bar.clientHeight;this.maxSize=e-8;this.size=Math.round(this.maxSize*this.maxSize/f)+g;this.maxScroll=this.maxSize-this.size;this.toWrapperProp=this.maxScroll/(e-f);this.bar.style[this.dir=="horizontal"?"width":"height"]=(this.size-g)+"px"},setPosition:function(f,e){if(!e&&this.bar.style.opacity!="1"){this.show()}f=this.toWrapperProp*f;if(f<0){f=0}else{if(f>this.maxScroll){f=this.maxScroll}}if(b){f=this.dir=="horizontal"?"translate3d("+Math.round(f)+"px,0,0)":"translate3d(0,"+Math.round(f)+"px,0)"}else{f=this.dir=="horizontal"?"translate("+Math.round(f)+"px,0)":"translate(0,"+Math.round(f)+"px)"}this.bar.style.webkitTransform=f},show:function(){if(b){this.bar.style.webkitTransitionDelay="0,0"}this.bar.style.opacity="1"},hide:function(){if(b){this.bar.style.webkitTransitionDelay="0,200ms"}this.bar.style.opacity="0"},remove:function(){this.bar.parentNode.removeChild(this.bar);return null}};var b=("m11" in new WebKitCSSMatrix());var a=navigator.appVersion.match(/iphone/gi)?true:false;window.iScroll=c})();